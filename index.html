<!DOCTYPE html>
<html>
    
<head>
    <title>Volkswagen AR App Admin Panel</title>
    
    <link rel="stylesheet" type="text/css" href="Styles.css">
    
    <script>

    //create account functionality
    function createAccountDatabase() {
        event.preventDefault();
            
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var confirmPassword = document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
            alert("Passwords do not match. Please try again.");
        } else {
            var url = "https://jwpoyq5nsnvbefkomgqojmoqxu0gxhcr.lambda-url.us-east-2.on.aws/?UserID=" + username + "&Password=" + password + "&Color=Violet";
            fetch(url, {
                method: 'GET'
            }).then(response => {
                console.log('Request sent successfully');
            }).catch(error => {
                console.error('Error sending request:', error);
            });
            alert("Account Created Successfully");
        }

    }

    //upload model to database functionality
    function uploadModel(){

        event.preventDefault();
            
        var modelName = document.getElementById('modelName').value;
        var modelUrl = document.getElementById('modelUrl').value;
        var car = document.getElementById('car').value;
            
        var url = "https://czenhyigbsqohlv74ihu2jzj6a0wfbrw.lambda-url.us-east-2.on.aws/?Modelname=" + modelName + "&Modelkey=" + modelUrl + "&Car=" + car;
        fetch(url, {
            method: 'GET'
        }).then(response => {
            console.log('Request sent successfully');
        }).catch(error => {
            console.error('Error sending request:', error);
            alert("Error: Model Already Exists, Please Try Again With New Model");
        });
        alert("Model Uploaded");
    }

    //function that adds rows to the table
    function addRow(name, url, type) {
        var table = document.getElementById("database-table");
        var row = table.insertRow(table.rows.length);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        cell1.innerHTML = name;
        cell2.innerHTML = '<a href="' + url + '">Link to ' + name + '</a>';
        cell3.innerHTML = type;
    }

    //example url to show can pull from one, will delete soon
    const requestUrl = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';

    var data = [["","",""],["VWATLAS","https:\/\/id-buzz.s3.us-east-2.amazonaws.com\/VWATLAS.usdz","1"],["vwatlas_low","https:\/\/id-buzz.s3.us-east-2.amazonaws.com\/vwatlas_low.usdz","1"],["VWBUZZ","https:\/\/id-buzz.s3.us-east-2.amazonaws.com\/VWBUZZ.usdz","1"],["vwbuzz_low","https:\/\/id-buzz.s3.us-east-2.amazonaws.com\/vwbuzz_low.usdz","1"]]

    const requestJSON = async url => {

        const response = await (await fetch(url)).json();
        
        //for actual use
        //current issue is https://stackoverflow.com/questions/43871637/no-access-control-allow-origin-header-is-present-on-the-requested-resource-whe
        //data=response.data
        //then parse from here
        
        console.log(data)
        var dataLength = data.length;
        for (var i = 0; i < dataLength; i++) {
            console.log(data[i]);
            var modelInfo = data[i];

            if (modelInfo[2] == '1'){
                addRow(modelInfo[0], modelInfo[1], "Car");
            }else{
                addRow(modelInfo[0], modelInfo[1], "Accessory");
            }
        }
    }

    requestJSON(requestUrl);
    
    </script>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    
</head>
    
<body>

<!-- Header -->
<h1>Volkswagen AR App Admin Panel</h1>
<br>

<!-- Pictures/3D -->
<div class="image-container">
  <div>
    <img src="2023-08-volkswagen-logo.png" alt="Volkswagen Logo" style="width:50%;">
  </div>
  <div>
    <div class = "model-display">
        <model-viewer src="vwbuzz_low.glb" ar ar-modes="webxr scene-viewer quick-look" camera-controls shadow-intensity="1" scale="6 6 6"> </model-viewer>
    </div>
  </div>
</div>
<br>
    
<!-- View Database -->
<div class = "section-header">
    <p>View Database</p>
</div>
    
<table id='database-table'>
    <tr>
        <th>Model Name</th>
        <th>Model URL</th>
        <th>Type</th>
    </tr>
</table>

<button onclick="addRow('Hello', 'https://www.example.com/newcar', '0')">Add Row Test</button>

<br><br>
    
<div class = "section-header">
    <p>Upload Model</p>
</div>
<br>
    
<form>
    
    <div class = "input-boxes">
        <label for="modelName">Model Name: </label>
        <input type="text" id="modelName" name="modelName"><br><br>
    </div>

    <div class = "input-boxes">
        <label for="modelUrl">Model URL: </label>
        <input type="text" id="modelUrl" name="modelUrl"><br><br>
    </div>

    <div class = "input-boxes">
        <label for="type">Type: </label>
        <select id="type" name="type">
            <option value="car">Car</option>
            <option value="accessory">Accessory</option>
        </select><br><br>
    </div>

<button onclick="uploadModel()">Upload Model</button>

</form>

<br><br>

<!-- Create User Account -->
<div class = "section-header">
    <p>Create User Account</p>
</div>
<br>
    
<form>
    
    <div class = "input-boxes">
        <label for="username">Username: </label>
        <input type="text" id="username" name="username"><br><br>
    </div>

    <div class = "input-boxes">
        <label for="password">Password: </label>
        <input type="password" id="password" name="password"><br><br>
    </div>

    <div class = "input-boxes">
        <label for="confirmPassword">Confirm Password: </label>
        <input type="password" id="confirmPassword" name="confirmPassword"><br><br>
    </div>

<button onclick="createAccountDatabase()">Create Account</button>

</form>
    
</body>
    
</html>
